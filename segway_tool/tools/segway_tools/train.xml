<tool id="segway_tool_train" name="Train model" version="0.0.1">
  <requirements>
    <requirement type="package" version="3.0">segway</requirement>
  </requirements>
  <description></description>
  <command>
  <![CDATA[
  #if str($exclude_coords) == 'None':
      #set exclude_coords = ''
  #end if
  #if str($include_coords) == 'None':
      #set include_coords = ''
  #end if
segway '--cluster-opt=' train --include-coords='$include_coords' --exclude-coords="$exclude_coords" --tracks-from='$tracks' --max-train-rounds='$max_train_rounds' --num-instances='$num_instances' --num-labels='$num_labels' --resolution='$resolution' '$genodata' './traindir' > /dev/null 2>&1 &&
tar -zcf $output ./traindir
]]>
  </command>

  <inputs>
    <param name="genodata" type="data" label="Genomedata Archive"/>
    <param name="tracks" type="data" label="Tracks" help="File containing tracks to add to the tracks to use"/>

    <section name="Coordinate Options" expanded="true">
        <param name="include_coords" type="data" optional="true" label="Include Coordinates" help="Optional: File containing the genomic coordinates to limit to"/>
        <param name="exclude_coords" type="data" optional="true" label="Exclude Coordinates" help="Optional: File containing genomic coordinates to filter"/>
    </section>

    <!--
    <param name="coords" type="select" label="Include/Exclude Coordinates" help="Optional: File containing genomic coordinates to limit to/filter">
        <option value="Include Coordinates"></option>
        <option value="Exclude Coordinates"></option>
    </param>
    <when value="Include Coordinates">
      <param name="include_coords" type="data" optional="true" label="Include Coordinates" help="Optional: File containing the genomic coordinates to limit to"/>
    </when>
    <when value="Exlude Coordinates">
      <param name="exclude_coords" type="data" optional="true" label="Exclude Coordinates" help="Optional: File containing genomic coordinates to filter"/>
    </when>
    -->

    <param name="max_train_rounds" type="integer" value="100" min="1" label="Max Train Rounds" help="Maximum number of rounds each training instance runs"/>
    <param name="num_instances" type="integer" value="1" min="1" label="Number of Instances" help="Number of training instances to run, randomizing start parameters by the specified number of times"/>
    <param name="num_labels" type="integer" value="2" min="1" label="Number of labels" help="Number of segment labels to create"/>
    <param name="resolution" type="integer" value="1" label="Resolution" help="Downsample to every RES bp"/>
  </inputs>
  <outputs>
    <data format="fast5.tar.gz" name="output" label="Segway model trained on '${genodata.name}'"/>
    <collection name="important_outputs" type="list">
        <discover_datasets pattern="*" directory="/traindir" />
    </collection>
  </outputs>

  <tests>
    <!--<test>
      <param name="input" value="fa_gc_content_input.fa"/>
      <output name="out_file1" file="fa_gc_content_output.txt"/>
    </test>-->
  </tests>

  <help>
  </help>

</tool>
